/*
|--------------------------------------------------------------------------
| DATA REPORT DASHBOARD STYLES (datareport.css)
|--------------------------------------------------------------------------
| Custom styling for the data visualization and report dashboard layout, 
| including filter controls, enhanced tables, and responsiveness.
*/

:root {
    /* --- THEME VARIABLES --- */
    --color-primary: #007bff; /* Primary Blue for buttons/links */
    --color-secondary: #6c757d; /* Muted text */
    --bg-color-main: #ffffff; /* Card and Page Background */
    --bg-color-light: #f8f9fa; /* Filter Bar/Odd table row background */
    --border-color: #dee2e6; /* Card borders */
    --border-color-light: #e9ecef; /* Table cell/Filter bar borders */
    --text-color-dark: #343a40; /* Main text color */
    --text-color-header: #495057; /* Table header text color */
}

/* ----------------------------------------------------------- */
/* 1. LAYOUT, HEADER & CARDS                                   */
/* ----------------------------------------------------------- */

.datareport-page {
    padding: 1.5rem;
}

.datareport-page .page-title i {
    margin-right: 10px;
    color: var(--color-primary);
}

.card {
    border: 1px solid var(--border-color);
    border-radius: 0.75rem;
    overflow: hidden;
    height: 100%; /* Important for equal height in the grid */
    box-shadow: 0 0.05rem 0.25rem rgba(0, 0, 0, 0.05);
}

.card-header {
    background-color: var(--bg-color-main) !important;
    border-bottom: 1px solid var(--border-color);
}

.card-body {
    padding: 1rem;
    display: flex;
    gap: 1.5rem; /* Spacing between chart and table wrapper */
}

/* --- Styling for Select Filters INSIDE Card Headers --- */

/* Ensures the select box stays small, overriding any default size */
.card-header .form-select-sm {
    /* Set a maximum width so the header text isn't squeezed too much */
    max-width: 150px; 
    
    /* Ensures the size is appropriate for a quick filter */
    font-size: 0.75rem; 
    padding: 0.25rem 0.5rem;
    height: 30px; /* Consistent height */
    
    /* Adds a slight border/shadow effect to stand out from the header */
    border: 1px solid #ced4da;
    border-radius: 4px;
}

/* Ensure the margin we added inline (margin-left: 10px) is respected,
   though ideally, using Bootstrap's `me-2` class is cleaner than inline styles. */
.card-header .d-flex .form-select-sm {
    margin-left: 10px; /* Use the existing margin */
}

/* Tidy up the card-header itself, if needed, to align items */
.card-header.d-flex {
    /* Ensures items are vertically centered */
    align-items: center; 
    /* Allows text to shrink if necessary, but prioritizes the select box */
    flex-wrap: nowrap; 
}

/* Optional: Add hover/focus styling for better UX */
.card-header .form-select-sm:focus {
    border-color: #80bdff;
    outline: 0;
    box-shadow: 0 0 0 0.1rem rgba(0, 123, 255, 0.25);
}

/* ----------------------------------------------------------- */
/* 2. GLOBAL FILTER BAR & CUSTOM DROPDOWNS                     */
/* ----------------------------------------------------------- */

/* Vertical Divider for Filter Bar */
.filter-separator {
    /* Set a minimum width/padding */
    margin: 0 5px; 
    
    /* Set height equal to the form controls */
    height: 1.5rem; /* Adjust based on the exact height of your .form-select-sm */
    
    /* Style the divider line */
    width: 1px;
    background-color: #dee2e6; /* Light gray color (Bootstrap border color) */
    
    /* Ensure it doesn't shrink or grow */
    flex-shrink: 0;
}

/* Fix for dropdown text being overlapped by the native arrow icon */
.form-select.form-select-sm {
    /* * Increase padding on the right to give space for the icon.
     * Bootstrap default padding is usually less, increasing it to 2.5em 
     * ensures the text ('All Time', 'Monthly', etc.) clears the arrow.
     */
    padding-right: 2.5em !important; 
    
    /* Ensure text alignment is centered or slightly left */
    text-align: left;
}

.filter-bar {
    background: var(--bg-color-light);
    padding: 15px;
    border-radius: 8px;
    border: 1px solid var(--border-color-light);
    margin-bottom: 20px;
    box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
}

/* Customizing the Select inputs */
.filter-bar .form-select-sm {
    /* Base styles */
    font-size: 0.8rem;
    padding: 0.35rem 0.75rem 0.35rem 0.5rem;
    height: auto; /* Allow padding to define height */
    color: var(--text-color-dark);
    border: 1px solid var(--border-color);
    border-radius: 0.25rem;
    background-color: var(--bg-color-main);
    
    /* Custom Arrow (Disables default arrow in some browsers and adds custom BG styling) */
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right 0.35rem center;
    background-size: 14px 14px;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
}

.filter-bar .form-select-sm:disabled {
    opacity: 0.6;
    background-color: var(--border-color-light);
}

.filter-bar .btn-sm {
    font-size: 0.8rem;
    padding: 0.35rem 0.75rem;
}

/* **Condition Colors** (Based on your filter options) */
.status-good {
    background-color: #1cc88a !important; /* Success Green */
    color: white;
}

.status-damaged {
    background-color: #f6c23e !important; /* Warning Yellow */
    color: #333;
}

.status-lost {
    background-color: #e74a3b !important; /* Danger Red */
    color: white;
}

/* **Borrow Status & Request Colors** (Common status examples) */
.status-pending {
    background-color: #36b9cc !important; /* Info Cyan */
    color: white;
}

.status-approved {
    background-color: #4e73df !important; /* Primary Blue */
    color: white;
}

.status-returned,
.status-rejected {
    background-color: #858796 !important; /* Secondary Gray */
    color: white;
}


/* ----------------------------------------------------------- */
/* 3. CHART AND TABLE WRAPPERS                                 */
/* ----------------------------------------------------------- */

.chart-wrapper {
    position: relative;
    height: 250px; /* Standardized height */
    min-width: 50%;
    flex: 1 1 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.table-wrapper {
    max-height: 250px; /* Standardized height to match chart */
    overflow-y: auto;
    font-size: 0.85rem;
    flex: 1 1 50%;
    border: 1px solid var(--border-color-light); /* Visual cue for scrolling area */
    border-radius: 0.25rem;
}

/* ----------------------------------------------------------- */
/* 4. REFINED TABLES (datareport-table)                        */
/* ----------------------------------------------------------- */

.table { /* Targets Bootstrap's .table class */
    font-size: 0.8rem;
    margin-bottom: 0;
    width: 100%;
    /* ADD THIS LINE to ensure the table content width is respected and scrolling kicks in */
    min-width: 100%; 
    border-collapse: collapse;
}

/* Table Header Styles (Sticky for scrolling) */
.table thead {
    border-bottom: 2px solid var(--border-color);
}

.table th {
    font-weight: 600;
    padding: 0.5rem 0.75rem;
    text-align: left;
    color: var(--text-color-header);
    
    /* STICKY HEADER */
    position: sticky;
    top: 0;
    background-color: var(--bg-color-main); 
    z-index: 10;
    box-shadow: 0 1px 2px rgba(0,0,0,0.08); /* Separator shadow */
}

/* Table Body/Cell Styles */
.table td {
    padding: 0.4rem 0.75rem;
    border-bottom: 1px solid var(--border-color-light);
    color: var(--text-color-dark);
    text-align: left;
}

/* Zebra Stripe (Alternating Row Color) */
.table tbody tr:nth-child(odd) {
    background-color: var(--bg-color-light);
}

.table tbody tr:hover {
    background-color: #e2f0ff; /* Subtle highlight on hover */
    cursor: default;
}

/* Specific Alignment Fixes based on HTML structure */

/* Qty column in Top Borrowed Items table */
#tableTopBorrowed th:last-child,
#tableTopBorrowed td:last-child {
    text-align: right !important;
    font-weight: 700;
}

/* Final columns (Status, Type, Date) are centered for badges/visual consistency */
#tableStatus th:last-child,
#tableStatus td:last-child,
#tableRequests th:last-child,
#tableRequests td:last-child,
#tableConditions th:last-child,
#tableConditions td:last-child {
    text-align: center !important;
}


/* ----------------------------------------------------------- */
/* 5. STATUS BADGES (Assumed from previous context)            */
/* ----------------------------------------------------------- */

.badge-status-summary {
    font-size: 0.7rem;
    font-weight: 600;
    padding: 0.3em 0.6em;
    border-radius: 0.3rem;
    display: inline-block;
}

.status-approved, .status-returned { background-color: #10b981; color: #fff; } 
.status-pending { background-color: #f59e0b; color: #fff; } 
.status-rejected, .status-lost { background-color: #ef4444; color: #fff; } 
.status-damaged { background-color: #fcd34d; color: #1f2937; } 
.status-missing { background-color: #6366f1; color: #fff; }


/* ----------------------------------------------------------- */
/* 6. RESPONSIVENESS (Mobile/Tablet adjustments)               */
/* ----------------------------------------------------------- */

@media (max-width: 991px) {
    
    /* Fix the initial filter label layout on mobile */
    .filter-bar .d-flex.align-items-center.gap-2 {
        margin-bottom: 0.5rem; /* Add spacing below the 'Filter Data' label */
    }

    /* Stack the chart and table vertically on tablets/mobiles */
    .card-body {
        flex-direction: column !important;
    }

    .chart-wrapper, .table-wrapper {
        min-width: 100%;
        flex: 1 1 100%;
    }

    /* Reset max-height and scrolling when stacked */
    .table-wrapper {
        max-height: 250px;
        /* overflow-y: visible; */
        margin-top: 1rem;
        border: 1px solid var(--border-color-light);
    }

    .filter-bar {
        /* Allow filter options to wrap on small screens */
        flex-direction: column;
        align-items: stretch !important;
    }

    .filter-bar > * {
        width: 100% !important; /* Make all inputs full width */
        margin-left: 0 !important;
    }
}

/* Prevent the dropdown from closing when clicking inside the label/checkbox */
#reportSelectionList label.dropdown-item {
    cursor: pointer;
    user-select: none;
}
#reportSelectionList label.dropdown-item input {
    margin-right: 8px;
}